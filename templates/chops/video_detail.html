{% extends 'chops/base.html' %}
{% load static %}
{% block content %}
    



<!-- semantic UI -->
<link rel="stylesheet" type='text/css' href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.2.14/semantic.min.css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>


  
<div class="video-detail">
    <a href="{% url 'foodvideolist' %}"><i style='font-size:15px' class='fas fa-angle-left'></i> Back</a>
    <br>
    <div class="rowws">
        <div class="video-img-container">
            <video width="100%" height="170px" controls controlsList="nodownload">
            <source src="{{ video.video_fileURL}}" type="video/mp4">
            Your browser does not support the video tag.
        </video>
        </div>
        <div class="secure-detail-v">
       
            <h3 class="product-titles">{{video.title}}</h3>
            
            <form class="likesc" id="like-form-{{ video.id }}">
                {% csrf_token %}
                <input type="hidden" name="video_id" value="{{ video.id }}">
                <button type="button" class="like-button" data-video-id="{{ video.id }}">
                    <i class="thumbs up icon"></i>&nbsp;
                </button>
                <span class="like-count">{{ num_likes }}</span>
                <span> | views: {{ video.viewers.count }}</span>

            </form>
           
                
            <div>
            
                <p>{{ video.description }}</p>
            </div>
                <!-- Additional product details -->
            
       
        </div>
       
        
    
       
        

    </div>
</div>    
<script>
    $(document).ready(function () {
        $('.like-button').click(function () {
            var videoId = $(this).data('video-id');
            var form = $('#like-form-' + videoId);
            $.ajax({
                type: 'POST',
                url: '/liked/',
                data: form.serialize(),
                success: function (response) {
                    // Update like count on the page
                    $('.like-count').html(response.like_count);
                },
                error: function (xhr, status, error) {
                    console.error(error);
                }
            });
        });
    });
</script>
{% endblock %}

