{% extends 'chops/base.html' %}
{% load static %}
{% load custom_filters %}
{% block content %}

<div class="backsp">
    <p><a href="{% url 'chops' %}"><i style='font-size:15px' class='fas fa-angle-left'></i> Back</a>
    <div class="product-detail">
        
        <div class="roww">
            
            <div class="pro-img-container">
                <img class="pro-img" src="{{ product.imageURL }}" alt="{{ product.name }}" />
            </div>
            
        

        
            <div class="parallax-content section-xl text-md-left">
                
                <div>
                    <h4 class="product-title">{{product.name}}</h4>
                    <div class="product-rating_av">
                        {% for i in 5|num_range %}
                            {% if i < average_rating %}
                                <span class="mdi mdi-star"></span>
                            {% else %}
                                <span class="mdi mdi-star text-gray-13"></span>
                            {% endif %}
                        {% endfor %}
                    </div>
                        <div class="product-price-wrap">
                        <div class="product-price">â‚¦{{product.price|floatformat:2}}</div>
                    
                        </div> 
                        <br>
                    <div>
                        
                            <h6>{{ product.description }}</h6>
                        </div>
                        <!-- Additional product details -->
                        
                    
                
                        <div class="input-group quantity mr-3" style="width: 130px;">
                            <div class="input-group-btn">
                                                <button class="btn btn-primary btn-minus"  >
                                    <i class="fa fa-minus"></i>
                                </button>
                            </div>
                            <input type="text" id="quantityInput_{{ product.id }}" name="quantity" data-product="{{ product.id }}" data-action="add" class="form-control bg-secondary text-center" value="1">
                            <div class="input-group-btn">
                                <button  class="btn btn-primary btn-plus ">
                                    <i class="fa fa-plus"></i>
                                </button>
                            </div>
                        </div>
                        <br>
                        <button data-product={{product.id}} data-action="add"  class="btn btn-primary px-3 update-cart"><i class="fa fa-shopping-cart mr-1"></i> Add To Cart</button>
                    
                </div>
            <hr>
                
        
        
            </div>
        

            

        </div>



        
    </div>
   <div>
        <div class="product-rating">
            <form class="rate-form" data-product-id="{{ product.id }}" action="" method="POST"> 
                {% csrf_token %}  
                
                    <span class="fa fa-star fa-2x checked" id="first"></span>
                    <span class="fa fa-star fa-2x" id="second"></span>
                    <span class="fa fa-star fa-2x" id="third"></span>
                    <span class="fa fa-star fa-2x" id="fourth"></span>
                    <span class="fa fa-star fa-2x" id="fifth"></span>
                    <button type="submit" class="btn-success my-btn"> Submit Rate</button>
                
            </form> 
        
           <div id="confirm-box"></div>
        </div>           
        <div class="product-rating_av">
            <button id="ratesBtn">Click to see rates</button>
            <ul>
                {% for rating in ratings %}
                    <li>
                        <div id="ratesContainer" style="display: none;" class="customer-rating">
                            <div class="user_name">
                                <img src="{{ rating.customer.profile_pic.url }}" class="customer-image" alt="{{ rating.customer.username }}">
                                    {% for i in 5|num_range %}
                                        {% if i < rating.rating %}
                                            <span class="mdi mdi-star"></span>
                                        {% else %}
                                            <span class="mdi mdi-star text-gray-13"></span>
                                        {% endif %}
                                    {% endfor %}
                            </div>
                            <p>@{{ rating.customer.username }}:</p>
                        </div>
                    </li>
                {% endfor %}
            </ul>
        </div> 
  </div>
</div>

<script src="{% static 'js/star.js' %}"></script>


{% endblock %}

